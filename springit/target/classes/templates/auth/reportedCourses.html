<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layouts/main_layout :: head(title = 'EDZILLA - Reported Courses')}">
</head>
<body>
    <nav th:replace="~{layouts/main_layout :: navigation}"></nav>

    <div class="container-fluid">
        <div class="row">
            <div class=" col-4 container reported-courses">
                <div class="row">
                        Reported Courses
                </div>
                    <div class="row " th:each="reported : ${reportedCourse}">
                        <div class="reportClick" th:data-id="${reported.id}">
                            <div th:text="|Course Title: ${reported.title}|"> </div>
                            <div th:text="|Publisher User: ${reported.publisherName}|"></div>
                            <div th:text="|Reports Count: ${reported.reportCount}|"></div>
                        </div>
                    </div>
            </div>
            <div class="col-8 reported-view">
                <div id="reportsContent"></div>
            </div>
        </div>
    </div>

    <script>
        const reportedCourses = document.querySelectorAll(".reportClick")
        for(let i=0; i<reportedCourses.length; i++) {
            reportedCourses[i].addEventListener('click', function (event) {
                const reportedCourseId = this.getAttribute("data-id");
                let reportsContent = document.getElementById("reportsContent")
                reportsContent.innerHTML = "";
                fetch(`http://localhost:8080/reportCourse/${reportedCourseId}`)
                    .then(response => response.json())
                    .then(data =>{
                        reportsContent.innerHTML = data.title
                    })
                    .catch(err => console.error(err));
            })
        }
    </script>
</body>
</html>